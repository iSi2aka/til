XSS(クロスサイトスクリプティング)　https://master.tech-camp.in/v2/curriculums/5197

攻撃者が脆弱性のあるWebアプリケーション上に、悪意のあるJavaScriptのプログラム（スクリプト）を埋め込み、そのサイトの利用者を攻撃する手法。
別のサイト（またはメールなど）から、脆弱性のあるWebアプリケーションへ遷移したあとにスクリプトが実行されます。
これが「クロスサイトスクリプティング」の「クロスサイト（Webサイト間をまたぐ）」を意味します。

==================================================
<!DOCTYPE html>
<html>
<div>
  こんにちは
  <script>alert("不正なスクリプトです")</script>　//これが悪意のあるスクリプティング
</div>
</html>
==================================================


悪意のあるスクリプトをWebアプリケーションを表示したときに実行させることをゴールとした攻撃がXSSです。
「クロスサイトスクリプティング」のうち、スクリプトを埋め込んで実行させることが「スクリプティング」に該当します。


# xssの種類
### 反射型xss
  ユーザーが悪意のあるURLをクリックすると、脆弱性のあるWebアプリケーション上でスクリプトが実行されるようにする手法です。
  URLをクリックしてレスポンスがあると、即座にスクリプトが実行されることから、「反射型」と呼ばれます。
  
  1.ユーザーにURLをクリックさせる
    攻撃者が、ユーザーに悪意のあるURL（脆弱性のあるWebアプリケーションへ遷移するURLに細工をしたもの）をクリックさせます。
    ユーザーにクリックさせる方法としては、メールで送付したり、掲示板などに書き込んだりすることがあります。

  2.ユーザーがクリックすると脆弱性のあるWebアプリケーション上でスクリプトが動く
    上記の悪意のあるURLには、脆弱性のあるWebアプリケーション上で発火するスクリプトが仕込まれています。
    そして、ユーザーが脆弱性のあるWebアプリケーションのページを開くと、そのスクリプトが発火します。

  3.スクリプトが発火すると、攻撃者のサーバーへ個人情報が送られる
    直前のステップで発火したスクリプトは、個人情報を抜き取るようなものでした。クリックしたユーザーの個人情報が攻撃者のサーバーへ記録されてしまいました。


### 格納型xss
  脆弱性のあるWebアプリケーションの投稿などに、悪意のあるスクリプトを埋め込み、ユーザーがそのWebアプリケーションを訪れたときにスクリプトが発火するようにする攻撃手法です。
  脆弱性のあるWebアプリケーションにスクリプトを格納し、ユーザーが訪れたタイミングで発火するようになっていることから「格納型」と呼ばれます。
  
  1.攻撃者が、脆弱性のあるWebアプリケーションにスクリプト付きの投稿をする
    フォームからコンテンツを投稿する際に、スクリプトを埋め込んで投稿をします。

  2.ユーザーが、その投稿のあるページを訪れるとスクリプトが発火する
    スクリプトが埋め込まれた投稿のページを開くと、そのスクリプトが発火します。
    または、画像にマウスを合わせるとスクリプトが発火するような仕掛けになっていることもあります。

  3．スクリプトが発火すると、攻撃者のサーバーへ個人情報が送られる
    直前のステップで発火したスクリプトは、個人情報を抜き取るようなものでした。ユーザーの個人情報が攻撃者のサーバーへ記録されてしまいました。


# XSSの対処法
### 文字参照
  ブラウザ上で表示できない特殊文字を表記する際に用いられる記法です。
  例えば、HTML中に「<」もしくは「>」と記述すると、この2つはタグの「始まり」「終わり」と認識されてしまいます。これらのHTML要素を表すタグは、標準では文字列として表示されません。

    変換前	|  変換後
    --------+----------
    <	      |  & lt;
    >	      |  & gt;
    &	      |  & amp;
    "	      |  & quot;
    '	      |  & #39;

上の表は、XSSの対策をする際に変換すべき特殊文字の一覧です。これらの特殊文字を文字参照に変換して表示すれば、外部から埋め込まれたスクリプトが実行されることはありません








  
